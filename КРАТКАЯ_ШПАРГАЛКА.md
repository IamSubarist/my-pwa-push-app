# –ö—Ä–∞—Ç–∫–∞—è —à–ø–∞—Ä–≥–∞–ª–∫–∞: –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç Push-—É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ

## üéØ –°—É—Ç—å –≤ –æ–¥–Ω–æ–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–∏

–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ—Ç—Å—è –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è ‚Üí –°–µ—Ä–≤–µ—Ä —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç –∞–¥—Ä–µ—Å —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ ‚Üí –°–µ—Ä–≤–µ—Ä –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å ‚Üí –ë—Ä–∞—É–∑–µ—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é.

---

## üìã –û—Å–Ω–æ–≤–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç | –ì–¥–µ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è |
|-----------|------------|---------------|
| **–§—Ä–æ–Ω—Ç–µ–Ω–¥** | –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å, –ø–æ–¥–ø–∏—Å–∫–∞ –Ω–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è | `src/App.jsx` |
| **–ë—ç–∫–µ–Ω–¥** | –û—Ç–ø—Ä–∞–≤–∫–∞ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π, –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è | `backend/main.py` |
| **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö** | –•—Ä–∞–Ω–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫ –∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π | Supabase |
| **Service Worker** | –û–±—Ä–∞–±–æ—Ç–∫–∞ –∏ –ø–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–π | `public/sw.js` |
| **Push-—Å–µ—Ä–≤–∏—Å** | –î–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ | FCM/Firefox Push |

---

## üîÑ –ü—Ä–æ—Ü–µ—Å—Å –ø–æ–¥–ø–∏—Å–∫–∏ (5 —à–∞–≥–æ–≤)

1. **–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å —Ä–∞–∑—Ä–µ—à–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Üí –ë—Ä–∞—É–∑–µ—Ä —Å–ø—Ä–∞—à–∏–≤–∞–µ—Ç —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ
2. **–†–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è Service Worker** ‚Üí –†–∞–±–æ—Ç–∞–µ—Ç –≤ —Ñ–æ–Ω–µ –±—Ä–∞—É–∑–µ—Ä–∞
3. **–ü–æ–ª—É—á–∞–µ—Ç—Å—è VAPID –∫–ª—é—á** ‚Üí –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —Å —Å–µ—Ä–≤–µ—Ä–∞
4. **–°–æ–∑–¥–∞–µ—Ç—Å—è –ø–æ–¥–ø–∏—Å–∫–∞** ‚Üí –ë—Ä–∞—É–∑–µ—Ä –ø–æ–ª—É—á–∞–µ—Ç —É–Ω–∏–∫–∞–ª—å–Ω—ã–π –∞–¥—Ä–µ—Å (endpoint)
5. **–ü–æ–¥–ø–∏—Å–∫–∞ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è** ‚Üí –°–µ—Ä–≤–µ—Ä –∑–∞–ø–∏—Å—ã–≤–∞–µ—Ç –∞–¥—Ä–µ—Å –≤ –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö

---

## üì§ –ü—Ä–æ—Ü–µ—Å—Å –æ—Ç–ø—Ä–∞–≤–∫–∏ (6 —à–∞–≥–æ–≤)

1. **–ó–∞–ø—Ä–æ—Å –Ω–∞ –æ—Ç–ø—Ä–∞–≤–∫—É** ‚Üí –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –Ω–∞–∂–∏–º–∞–µ—Ç –∫–Ω–æ–ø–∫—É –∏–ª–∏ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
2. **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫** ‚Üí –°–µ—Ä–≤–µ—Ä –Ω–∞—Ö–æ–¥–∏—Ç –≤—Å–µ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–∞ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
3. **–®–∏—Ñ—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö** ‚Üí –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–∏ –ø–æ–¥–ø–∏—Å–∫–∏ (p256dh, auth)
4. **–û—Ç–ø—Ä–∞–≤–∫–∞ –Ω–∞ push-—Å–µ—Ä–≤–∏—Å** ‚Üí POST –∑–∞–ø—Ä–æ—Å –Ω–∞ endpoint (FCM/Firefox)
5. **–î–æ—Å—Ç–∞–≤–∫–∞ –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ** ‚Üí Push-—Å–µ—Ä–≤–∏—Å –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ
6. **–ü–æ–∫–∞–∑ —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è** ‚Üí Service Worker –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—é

---

## üîê –ö–ª—é—á–µ–≤—ã–µ –ø–æ–Ω—è—Ç–∏—è

### VAPID –∫–ª—é—á–∏
- **–ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á** ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –ø–æ–¥–ø–∏—Å–∫–∏ (–æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –±—Ä–∞—É–∑–µ—Ä—É)
- **–ü—Ä–∏–≤–∞—Ç–Ω—ã–π –∫–ª—é—á** ‚Üí –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (—Ö—Ä–∞–Ω–∏—Ç—Å—è —Ç–æ–ª—å–∫–æ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ)

### –ü–æ–¥–ø–∏—Å–∫–∞ (Subscription)
```javascript
{
  endpoint: "https://fcm.googleapis.com/...",  // –ê–¥—Ä–µ—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏
  keys: {
    p256dh: "...",  // –ö–ª—é—á –¥–ª—è —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
    auth: "..."     // –ö–ª—é—á –¥–ª—è –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏
  }
}
```

### JWT —Ç–æ–∫–µ–Ω
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –¥–ª—è –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏
- –•—Ä–∞–Ω–∏—Ç—Å—è –≤ localStorage –±—Ä–∞—É–∑–µ—Ä–∞
- –î–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω 30 –¥–Ω–µ–π
- –û—Ç–ø—Ä–∞–≤–ª—è–µ—Ç—Å—è –≤ –∑–∞–≥–æ–ª–æ–≤–∫–µ: `Authorization: Bearer <—Ç–æ–∫–µ–Ω>`

---

## üóÑÔ∏è –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

### –¢–∞–±–ª–∏—Ü–∞ `users`
- `id` - ID –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- `username` - –ò–º—è
- `email` - Email (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `hashed_password` - –•–µ—à –ø–∞—Ä–æ–ª—è

### –¢–∞–±–ª–∏—Ü–∞ `push_subscriptions`
- `id` - ID –ø–æ–¥–ø–∏—Å–∫–∏
- `endpoint` - –ê–¥—Ä–µ—Å –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ (—É–Ω–∏–∫–∞–ª—å–Ω—ã–π)
- `p256dh` - –ü—É–±–ª–∏—á–Ω—ã–π –∫–ª—é—á —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è
- `auth` - –°–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á
- `user_id` - –°–≤—è–∑—å —Å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–º

---

## üîó API —ç–Ω–¥–ø–æ–∏–Ω—Ç—ã

| –ú–µ—Ç–æ–¥ | –ü—É—Ç—å | –ß—Ç–æ –¥–µ–ª–∞–µ—Ç |
|-------|------|------------|
| POST | `/api/register` | –†–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| POST | `/api/login` | –í—Ö–æ–¥ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è |
| GET | `/api/me` | –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ —Ç–µ–∫—É—â–µ–º –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ |
| GET | `/api/vapid-public-key` | –ü–æ–ª—É—á–∏—Ç—å –ø—É–±–ª–∏—á–Ω—ã–π VAPID –∫–ª—é—á |
| POST | `/api/subscribe` | –°–æ—Ö—Ä–∞–Ω–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É |
| POST | `/api/unsubscribe` | –£–¥–∞–ª–∏—Ç—å –ø–æ–¥–ø–∏—Å–∫—É |
| POST | `/api/send-notification` | –û—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ |

---

## üé® –ü–æ—Ç–æ–∫ –¥–∞–Ω–Ω—ã—Ö (–≤–∏–∑—É–∞–ª—å–Ω–æ)

```
–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å
    ‚Üì
–§—Ä–æ–Ω—Ç–µ–Ω–¥ (React)
    ‚Üì
–ë—ç–∫–µ–Ω–¥ (FastAPI)
    ‚Üì
–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö (Supabase)
    ‚Üì
Push-—Å–µ—Ä–≤–∏—Å (FCM/Firefox)
    ‚Üì
–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
    ‚Üì
Service Worker
    ‚Üì
–£–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ –Ω–∞ —ç–∫—Ä–∞–Ω–µ! üéâ
```

---

## ‚ö° –ë—ã—Å—Ç—Ä—ã–µ —Ñ–∞–∫—Ç—ã

‚úÖ **–†–∞–±–æ—Ç–∞–µ—Ç –æ—Ñ–ª–∞–π–Ω** - Service Worker —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–∞–∂–µ –∫–æ–≥–¥–∞ —Å–∞–π—Ç –∑–∞–∫—Ä—ã—Ç

‚úÖ **–ë–µ–∑–æ–ø–∞—Å–Ω–æ** - –î–∞–Ω–Ω—ã–µ —à–∏—Ñ—Ä—É—é—Ç—Å—è, –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –∫–ª—é—á–∏ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏

‚úÖ **–ú–∞—Å—à—Ç–∞–±–∏—Ä—É–µ–º–æ** - –û–¥–∏–Ω –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –º–æ–∂–µ—Ç –∏–º–µ—Ç—å –Ω–µ—Å–∫–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤

‚úÖ **–°—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ** - –ò—Å–ø–æ–ª—å–∑—É–µ—Ç Web Push API (—Å—Ç–∞–Ω–¥–∞—Ä—Ç W3C)

‚úÖ **–ö—Ä–æ—Å—Å–ø–ª–∞—Ç—Ñ–æ—Ä–º–µ–Ω–Ω–æ** - –†–∞–±–æ—Ç–∞–µ—Ç –Ω–∞ –≤—Å–µ—Ö —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã—Ö –±—Ä–∞—É–∑–µ—Ä–∞—Ö

---

## üêõ –ß–∞—Å—Ç—ã–µ –ø—Ä–æ–±–ª–µ–º—ã

| –ü—Ä–æ–±–ª–µ–º–∞ | –†–µ—à–µ–Ω–∏–µ |
|----------|---------|
| –£–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –Ω–µ –ø—Ä–∏—Ö–æ–¥—è—Ç | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–∞–∑—Ä–µ—à–µ–Ω–∏–µ –≤ –±—Ä–∞—É–∑–µ—Ä–µ |
| –ü–æ–¥–ø–∏—Å–∫–∞ –Ω–µ —Å–æ—Ö—Ä–∞–Ω—è–µ—Ç—Å—è | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ç–æ–∫–µ–Ω –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏–∏ |
| –û—à–∏–±–∫–∞ –ø—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å VAPID –∫–ª—é—á–∏ |
| Service Worker –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç | –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏—é –≤ –∫–æ–Ω—Å–æ–ª–∏ |

---

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã

- **–ü–æ–¥—Ä–æ–±–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: `–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–ê–†–•–ò–¢–ï–ö–¢–£–†–ê.md`
- **–ü–æ—à–∞–≥–æ–≤—ã–π –ø—Ä–æ—Ü–µ—Å—Å**: `–ò–ù–°–¢–†–£–ö–¶–ò–Ø_–ü–û–®–ê–ì–û–í–û.md`

---

## üí° –î–ª—è –æ–±—ä—è—Å–Ω–µ–Ω–∏—è –¥—Ä—É–≥–∏–º

**–ü—Ä–æ—Å—Ç–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
"–≠—Ç–æ –∫–∞–∫ –ø–æ—á—Ç–æ–≤–∞—è –ø–æ–¥–ø–∏—Å–∫–∞. –ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å –¥–∞–µ—Ç —Å–≤–æ–π –∞–¥—Ä–µ—Å (endpoint), –º—ã –µ–≥–æ –∑–∞–ø–∏—Å—ã–≤–∞–µ–º. –ö–æ–≥–¥–∞ –Ω—É–∂–Ω–æ –æ—Ç–ø—Ä–∞–≤–∏—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ, –º—ã –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –µ–≥–æ –Ω–∞ —ç—Ç–æ—Ç –∞–¥—Ä–µ—Å, –∏ –æ–Ω–æ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –¥–∞–∂–µ –µ—Å–ª–∏ —Å–∞–π—Ç –∑–∞–∫—Ä—ã—Ç."

**–¢–µ—Ö–Ω–∏—á–µ—Å–∫–æ–µ –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ:**
"–ò—Å–ø–æ–ª—å–∑—É–µ–º Web Push API —Å VAPID –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–µ–π. –ë—Ä–∞—É–∑–µ—Ä —Å–æ–∑–¥–∞–µ—Ç –ø–æ–¥–ø–∏—Å–∫—É —á–µ—Ä–µ–∑ push-—Å–µ—Ä–≤–∏—Å (FCM/Firefox), –º—ã —Å–æ—Ö—Ä–∞–Ω—è–µ–º endpoint –∏ –∫–ª—é—á–∏ —à–∏—Ñ—Ä–æ–≤–∞–Ω–∏—è. –ü—Ä–∏ –æ—Ç–ø—Ä–∞–≤–∫–µ —à–∏—Ñ—Ä—É–µ–º –¥–∞–Ω–Ω—ã–µ, –ø–æ–¥–ø–∏—Å—ã–≤–∞–µ–º VAPID –∫–ª—é—á–æ–º –∏ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –Ω–∞ endpoint. Push-—Å–µ—Ä–≤–∏—Å –¥–æ—Å—Ç–∞–≤–ª—è–µ—Ç –Ω–∞ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ, Service Worker –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç –∏ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ."

